<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>ssh 사용 | greg.lee's blog</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="https://daniel-hebn.github.io/2018/06/29/2018-06-29-ssh-사용/">
<meta name="description" content="인증서 생성 방법리눅스의 경우 아래의 순서대로 생성한다.   Run: ssh-keygen -t rsa. For a more secure 4096-bit key, run: ssh-keygen -t rsa -b 4096 Press enter when…">
<meta property="og:type" content="article">
<meta property="og:title" content="ssh 사용">
<meta property="og:url" content="https://daniel-hebn.github.io/2018/06/29/2018-06-29-ssh-%EC%82%AC%EC%9A%A9/">
<meta property="og:site_name" content="greg.lee&#39;s blog">
<meta property="og:description" content="인증서 생성 방법리눅스의 경우 아래의 순서대로 생성한다.   Run: ssh-keygen -t rsa. For a more secure 4096-bit key, run: ssh-keygen -t rsa -b 4096 Press enter when…">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://daniel-hebn.github.io/images/logo/ssh.png">
<meta property="article:published_time" content="2018-06-29T08:53:45.000Z">
<meta property="article:modified_time" content="2022-05-07T15:25:02.771Z">
<meta property="article:author" content="Lee Hee Chang">
<meta property="article:tag" content="ssh">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://daniel-hebn.github.io/images/logo/ssh.png"><meta property="article:author" content="Lee Hee Chang"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2018-06-29 17:53:45"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="Lee Hee Chang"><link rel="icon" href="/images/rocket.png"><script>(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'G-1C42LL19JB', 'auto');
ga('send', 'pageview');</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/feed.xml" title="greg.lee's blog" type="application/rss+xml">
</head><body itemscope itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/rocket.png" alt="greg.lee's blog"><span class="menu__item__link--brand__label">greg.lee's blog</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/about">About</a></div><div class="menu__item"><a class="menu__item__link" href="/archives">Archives</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">ssh 사용</h1><div class="article__meta"><time class="article__meta__time" datetime="2018-06-29T08:53:45.000Z" itemprop="datePublished">2018-06-29 17:53:45</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/ssh/">ssh</a></div></div><div class="article__contents"><img src="/images/logo/ssh.png"><h2 id="인증서-생성-방법"><a href="#인증서-생성-방법" class="headerlink" title="인증서 생성 방법"></a>인증서 생성 방법</h2><p>리눅스의 경우 아래의 순서대로 생성한다. <br></p>
<ul>
<li>Run: <strong>ssh-keygen -t rsa</strong>. For a more secure 4096-bit key, run: <strong>ssh-keygen -t rsa -b 4096</strong></li>
<li>Press enter when asked where you want to save the key (this will use the default location). <br><br>서버별로 인증서를 생성하고 싶다면 default 가 아닌 파일명을 입력하여 생성하면 된다. <br><br>ex) Enter file in which to save the key (/root/.ssh/id_rsa): ./vultr_rsa</li>
<li>Enter a passphrase for your key.</li>
<li>Run <strong>cat ~/.ssh/id_rsa.pub</strong> - this will give you the key in the proper format to paste into the control panel.<br><br>서버별로 인증서를 생성했다면 생성된 파일명과 동일하게 설정한다. <br><br>ex) ./vultr_rsa.pub</li>
<li>Make sure you backup the <strong>~/.ssh/id_rsa</strong> file. This cannot be recovered if it is lost. </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@greg ~]<span class="comment"># ssh-keygen -t rsa -b 4096</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):</span><br><span class="line">Created directory <span class="string">&#x27;/root/.ssh&#x27;</span>.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:tRA6/GzG8DevAa+euo6DX4WrLf+f+Bbdcw8Nfy+JVLs root@greg.lee</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 4096]----+</span></span><br><span class="line"><span class="string">|        .        |</span></span><br><span class="line"><span class="string">|     . . .       |</span></span><br><span class="line"><span class="string">|      = . .      |</span></span><br><span class="line"><span class="string">|       O o .  o  |</span></span><br><span class="line"><span class="string">|      . S +. o = |</span></span><br><span class="line"><span class="string">|       = +.oo = =|</span></span><br><span class="line"><span class="string">|   .  o   oo.. + |</span></span><br><span class="line"><span class="string">|  . o=   +.+. E o|</span></span><br><span class="line"><span class="string">|   .+==+=    .   |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure>

<h2 id="ssh-명령-기본-사용법"><a href="#ssh-명령-기본-사용법" class="headerlink" title="ssh 명령 기본 사용법"></a>ssh 명령 기본 사용법</h2><p>ssh 명령의 기본 사용은 아래와 같다</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@greg: ~] ssh &#123;사용자ID&#125;@&#123;서버명&#125;</span><br></pre></td></tr></table></figure>

<p>아래와 같은 명령을 내릴 때 ssh 명령은 <strong>~/.ssh/id_rsa</strong> 키 파일을 사용하여 vultr 서버에 root 계정으로 로그인을 시도한다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@greg: ~] ssh root@vultr</span><br></pre></td></tr></table></figure>

<p>기본 ssh 키 (~/.ssh/id_rsa) 가 아닌 다른 ssh 키 파일을 사용해야 한다면, 다음과 같이 -i 옵션을 사용해야 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@greg: ~] ssh root@vultr -i ~/.ssh/vultr.pem </span><br></pre></td></tr></table></figure>

<h2 id="ssh-config-설정-파일"><a href="#ssh-config-설정-파일" class="headerlink" title="~/.ssh/config 설정 파일"></a>~/.ssh/config 설정 파일</h2><p>여러 ssh 키 파일을 사용할 때 발생하는 문제는 ~/.ssh/config 파일로 해결할 수 있다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### for vultr</span></span><br><span class="line">Host vultr</span><br><span class="line">HostName 123.123.123.123</span><br><span class="line">User root</span><br><span class="line">IdentityFile ~/.ssh/vultr.pem</span><br><span class="line"></span><br><span class="line"><span class="comment">### for git </span></span><br><span class="line">Host github.com</span><br><span class="line">User git</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_xxxxxxxxxxx</span><br></pre></td></tr></table></figure>

<p>이렇게 설정할 경우 단순히 아래의 명령으로 해당 서버의 접속이 가능하다</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@greg: ~] ssh root@vultr</span><br></pre></td></tr></table></figure>

<p>이제 파일 소유권자만 설정 파일을 읽을 수 있도록 권한을 제한해야 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@greg: ~] chmod 440 ~/.ssh/config</span><br></pre></td></tr></table></figure>

<h2 id="ssh-config-설정-파일-구성"><a href="#ssh-config-설정-파일-구성" class="headerlink" title="~/.ssh/config 설정 파일 구성"></a>~/.ssh/config 설정 파일 구성</h2><h3 id="호스트-매핑"><a href="#호스트-매핑" class="headerlink" title="호스트 매핑"></a>호스트 매핑</h3><p>호스트 매핑은 Host 속성과 HostName 속성을 이용하여 실제 호스트 URL 에 매핑을 한다. </p>
<ul>
<li>Host: ssh 명령에 사용하는 이름</li>
<li>HostName: host 에 지정된 이름이 매핑되는 실제 호스트명 </li>
</ul>
<p>와일드 카드를 이용하여 서브 도메인 지정도 가능하다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### for vultr</span></span><br><span class="line">Host vultr</span><br><span class="line">HostName 123.123.123.123</span><br><span class="line">User root</span><br><span class="line">IdentityFile ~/.ssh/vultr.pem</span><br><span class="line">Port 12345</span><br><span class="line"></span><br><span class="line"><span class="comment">### for git </span></span><br><span class="line">Host x.greg.com </span><br><span class="line">User git</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_xxxxxxxxxxx</span><br></pre></td></tr></table></figure></div><div class="article__tags"><a class="article__tags__item" href="/tags/ssh/">ssh</a></div><div class="article__author" itemscope itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/greg_lee_c.png" alt="Lee Hee Chang"><a class="article__author__link" title="About Lee Hee Chang" rel="author">Lee Hee Chang</a><p class="article__author__desc">greg.lee 의 프로그래밍과 여러 생각에 대해 끄적이는 공간입니다.</p><div class="article__author__socials"></div><meta itemprop="name" content="Lee Hee Chang"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2022-05-07T15:25:02.771Z"><meta itemprop="articleBody" content="인증서 생성 방법리눅스의 경우 아래의 순서대로 생성한다. 

Run: ssh-keygen -t rsa. For a more secure 4096-bit key, run: ssh-keygen -t rsa -b 4096
Press enter when asked where you want to save the key (this will use the..."><meta itemprop="url" content="https://daniel-hebn.github.io/2018/06/29/2018-06-29-ssh-사용/"><meta itemprop="mainEntityOfPage" content="https://daniel-hebn.github.io/2018/06/29/2018-06-29-ssh-사용/"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="greg.lee's blog"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://daniel-hebn.github.io/images/rocket.png"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://daniel-hebn.github.io/images/logo/ssh.png"><meta itemprop="url" content="https://daniel-hebn.github.io/images/logo/ssh.png"><meta itemprop="width" content="360"><meta itemprop="height" content="180"></div></article></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/2021/09/16/2021-09-16-%EC%A0%9C%ED%92%88-%EA%B0%9C%EB%B0%9C%EC%A0%84%EC%97%90-%EA%B0%80%EC%9E%A5-%EB%A8%BC%EC%A0%80-%EC%83%9D%EA%B0%81%ED%95%B4%EB%B3%B4%EB%A9%B4-%EC%A2%8B%EC%9D%80-%EC%A7%88%EB%AC%B8/">제품 개발전에 가장 먼저 생각해보면 좋은 질문</a></li><li class="recent-posts__item"><a href="/2019/10/24/2019-10-24-elasticsearch-%EC%9D%B4%EC%8A%88-%EB%8C%80%EC%9D%91-1/">2019-10-24 elasticsearch 이슈 대응 (1)</a></li><li class="recent-posts__item"><a href="/2019/10/20/2019-10-20-elk-&amp;-kafka-%EA%B8%B0%EB%B0%98%EC%9D%98-%EB%A1%9C%EA%B7%B8-%EC%88%98%EC%A7%91-%EB%B0%8F-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EA%B5%AC%EC%B6%95-(2)/">elk &amp; kafka 기반의 로그 수집 및 모니터링 구축 (2)</a></li><li class="recent-posts__item"><a href="/2019/10/18/2019-10-18-elk-&amp;-kafka-%EA%B8%B0%EB%B0%98%EC%9D%98-%EB%A1%9C%EA%B7%B8-%EC%88%98%EC%A7%91-%EB%B0%8F-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EA%B5%AC%EC%B6%95-(1)/">elk &amp; kafka 기반의 로그 수집 및 모니터링 구축 (1)</a></li><li class="recent-posts__item"><a href="/2018/06/29/2018-06-29-ssh-%EC%82%AC%EC%9A%A9/">ssh 사용</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Archives</h3><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">9월 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">10월 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">6월 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">4월 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">2월 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">1월 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">12월 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">6월 2017</a><span class="archive-list-count">1</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/performance/">performance</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/design-pattern/">design-pattern</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/elasticsearch/">elasticsearch</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/elasticsearch/maintenance/">maintenance</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/elasticsearch/monitoring/">monitoring</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/http/RESTful/">RESTful</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/concurrency/">concurrency</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/spring/transaction/">transaction</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ssh/">ssh</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9D%BC%ED%95%98%EB%8A%94%EB%B0%A9%EC%8B%9D/">일하는방식</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9D%BC%ED%95%98%EB%8A%94%EB%B0%A9%EC%8B%9D/%EC%A7%88%EB%AC%B8%ED%95%98%EA%B8%B0/">질문하기</a><span class="category-list-count">1</span></li></ul></li></ul></div></div></div><p class="copyright"><small>© 2022 Lee Hee Chang<br>Powered by <a href="https://hexo.io" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external nofollow noopener noreferrer" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>