<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>MySQL 성능최적화 (5) | greg.lee's blog</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="https://daniel-hebn.github.io/2018/04/14/2018-04-14-MySQL-성능최적화-5/">
<meta name="description" content="6장 서버 설정 최적화기본 설정 방법MySQL 은 구성 정보를 명령줄 인수와 configuration file 설정에서 받는데 보통 &#x2F;etc&#x2F;my.cnf 또는 &#x2F;etc&#x2F;mysql&#x2F;my.cnf 에 있다. 서버가 읽는 설정 파일의 위치를 확인하려면…">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 성능최적화 (5)">
<meta property="og:url" content="https://daniel-hebn.github.io/2018/04/14/2018-04-14-MySQL-%EC%84%B1%EB%8A%A5%EC%B5%9C%EC%A0%81%ED%99%94-5/">
<meta property="og:site_name" content="greg.lee&#39;s blog">
<meta property="og:description" content="6장 서버 설정 최적화기본 설정 방법MySQL 은 구성 정보를 명령줄 인수와 configuration file 설정에서 받는데 보통 &#x2F;etc&#x2F;my.cnf 또는 &#x2F;etc&#x2F;mysql&#x2F;my.cnf 에 있다. 서버가 읽는 설정 파일의 위치를 확인하려면…">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://daniel-hebn.github.io/images/logo/MySQL_performance_tuning.png">
<meta property="article:published_time" content="2018-04-14T14:55:00.000Z">
<meta property="article:modified_time" content="2022-05-07T15:39:42.425Z">
<meta property="article:author" content="Lee Hee Chang">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="performance">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://daniel-hebn.github.io/images/logo/MySQL_performance_tuning.png"><meta property="article:author" content="Lee Hee Chang"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2018-04-14 23:55:00"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="Lee Hee Chang"><link rel="icon" href="/images/rocket.png"><script>(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'G-1C42LL19JB', 'auto');
ga('send', 'pageview');</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/feed.xml" title="greg.lee's blog" type="application/rss+xml">
</head><body itemscope itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/rocket.png" alt="greg.lee's blog"><span class="menu__item__link--brand__label">greg.lee's blog</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/about">About</a></div><div class="menu__item"><a class="menu__item__link" href="/archives">Archives</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">MySQL 성능최적화 (5)</h1><div class="article__meta"><time class="article__meta__time" datetime="2018-04-14T14:55:00.000Z" itemprop="datePublished">2018-04-14 23:55:00</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/MySQL/">MySQL</a><span class="article__meta__categories__separator">></span><a class="article__meta__categories__item" href="/categories/MySQL/performance/">performance</a></div></div><div class="article__contents"><img src="/images/logo/MySQL_performance_tuning.png"><h1 id="6장-서버-설정-최적화"><a href="#6장-서버-설정-최적화" class="headerlink" title="6장 서버 설정 최적화"></a>6장 서버 설정 최적화</h1><h2 id="기본-설정-방법"><a href="#기본-설정-방법" class="headerlink" title="기본 설정 방법"></a>기본 설정 방법</h2><p>MySQL 은 구성 정보를 명령줄 인수와 configuration file 설정에서 받는데 보통 /etc/my.cnf 또는 /etc/mysql/my.cnf 에 있다. 서버가 읽는 설정 파일의 위치를 확인하려면 다음과 같다</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> mysqld </span><br><span class="line">/usr/sbin/mysqld</span><br><span class="line">$ /usr/sbin/mysqld --verbose --<span class="built_in">help</span> | grep -A 1 <span class="string">&#x27;Default options&#x27;</span></span><br><span class="line">/etc/mysql/my.cnf ~/.my.cnf /usr/etc/my.cnf </span><br></pre></td></tr></table></figure>

<h2 id="문법과-변수의-범위-그리고-동적-재설정"><a href="#문법과-변수의-범위-그리고-동적-재설정" class="headerlink" title="문법과 변수의 범위 그리고 동적 재설정"></a>문법과 변수의 범위 그리고 동적 재설정</h2><p>설정은 모두 소문자로 적고 단어는 _ 나 - 로 구분한다. 둘 다 사용가능한 단어이지만 한 가지 형식만 골라 일관되게 사용할 것을 권장한다. 설정은 여러 범위를 가질 수 있다. 서버 전체에 적용되는 전역 범위 설정, 연결마다 설정이 다르게 가지는 세션 범위 설정 등이 있다. 많은 세션 범위 변수는 그와 동등한 전역 범위 변수를 갖는데 이를 기본값으로 간주할 수 있다.</p>
<p>설정 파일에 변수를 직접 선언할 수 있지만, 서버가 실행되는 동안에도 여러 가지를 변경할 수 있다. MySQL 에서는 이를 동적 설정 변수라 부른다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> sort_buffer_size <span class="operator">=</span> &#123;<span class="keyword">value</span>&#125;;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> sort_buffer_size <span class="operator">=</span> &#123;<span class="keyword">value</span>&#125;;</span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@sort</span>_buffer_size :<span class="operator">=</span> &#123;<span class="keyword">value</span>&#125;;</span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@session</span>.sort_buffer_size :<span class="operator">=</span> &#123;<span class="keyword">value</span>&#125;;</span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@global</span>.sort_buffer_size :<span class="operator">=</span> &#123;<span class="keyword">value</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>서버가 실행되는 동안 변수의 전역 값을 설정하면 현 세션 값과 기존의 다른 세션 값에는 영향을 미치지 않는다. 연결이 생성됐을 때 세션 값이 전역 값에서 초기화되기 때문이다. 따라서 설정을 변경할 때마다 SHOW GLOBAL VARIABLES 의 출력 값을 보고 원하는 결과가 나왔는지 확인해야 한다.</p>
<h2 id="일반적인-튜닝"><a href="#일반적인-튜닝" class="headerlink" title="일반적인 튜닝"></a>일반적인 튜닝</h2><h3 id="메모리-사용-튜닝하기"><a href="#메모리-사용-튜닝하기" class="headerlink" title="메모리 사용 튜닝하기"></a>메모리 사용 튜닝하기</h3><p>MySQL 의 메모리 소비는 조절할 수 있는 메모리와 조절 할 수 없는 메모리로 나뉜다.</p>
<p>메모리 튜닝은 다음 단계를 거친다.</p>
<ol>
<li>MySQL 이 사용 가능한 최대 메모리를 정한다.</li>
<li>MySQL 이 정렬 버퍼나 임시 테이블 등의 개별적인 연결에 필요한 메모리 양을 정한다.</li>
<li>운영체제가 제대로 실행되는 데 필요한 메모리 양을 정한다. 같은 장비에서 실행되는 주기적 배치 작업 등 다른 프로그램이 실행되는 데 필요한 메모리를 포함시킨다.</li>
<li>나머지 메모리를 InnoDB 버퍼 풀과 같은 MySQL 캐시로 사용한다. </li>
</ol>
<h3 id="InnoDB-버퍼-풀"><a href="#InnoDB-버퍼-풀" class="headerlink" title="InnoDB 버퍼 풀"></a>InnoDB 버퍼 풀</h3><p>InnoDB 를 사용한다면 버퍼 풀에 메모리를 많이 할당해야 한다. InnoDB 버퍼 풀은 인덱스를 캐시할 뿐 아니라 레코드 데이터, 어댑티브 해시 인덱스, 인서트 버퍼, 잠금 및 그 밖의 내부 구조를 가지고 있다. 또한, InnoDB 는 여러 쓰기 작업을 통합하고 순차적으로 실행하기 위해 버퍼 풀을 사용해 쓰기를 지연시킨다.</p>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/MySQL/">MySQL</a><a class="article__tags__item" href="/tags/performance/">performance</a></div><div class="article__author" itemscope itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/greg_lee_c.png" alt="Lee Hee Chang"><a class="article__author__link" title="About Lee Hee Chang" rel="author">Lee Hee Chang</a><p class="article__author__desc">greg.lee 의 프로그래밍과 여러 생각에 대해 끄적이는 공간입니다.</p><div class="article__author__socials"></div><meta itemprop="name" content="Lee Hee Chang"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2022-05-07T15:39:42.425Z"><meta itemprop="articleBody" content="6장 서버 설정 최적화기본 설정 방법MySQL 은 구성 정보를 명령줄 인수와 configuration file 설정에서 받는데 보통 /etc/my.cnf 또는 /etc/mysql/my.cnf 에 있다. 서버가 읽는 설정 파일의 위치를 확인하려면 다음과 같다
1234$ which mysqld /usr/sbin/mysqld$..."><meta itemprop="url" content="https://daniel-hebn.github.io/2018/04/14/2018-04-14-MySQL-성능최적화-5/"><meta itemprop="mainEntityOfPage" content="https://daniel-hebn.github.io/2018/04/14/2018-04-14-MySQL-성능최적화-5/"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="greg.lee's blog"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://daniel-hebn.github.io/images/rocket.png"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://daniel-hebn.github.io/images/logo/MySQL_performance_tuning.png"><meta itemprop="url" content="https://daniel-hebn.github.io/images/logo/MySQL_performance_tuning.png"><meta itemprop="width" content="360"><meta itemprop="height" content="180"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/04/14/2018-04-14-MySQL-%EC%84%B1%EB%8A%A5%EC%B5%9C%EC%A0%81%ED%99%94-2/"><div class="related-posts__item__background" style="background-image:url('/images/logo/MySQL_performance_tuning.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">MySQL 성능최적화 (2)</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/04/14/2018-04-14-MySQL-%EC%84%B1%EB%8A%A5%EC%B5%9C%EC%A0%81%ED%99%94-1/"><div class="related-posts__item__background" style="background-image:url('/images/logo/MySQL_performance_tuning.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">MySQL 성능최적화 (1)</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/04/14/2018-04-14-MySQL-%EC%84%B1%EB%8A%A5%EC%B5%9C%EC%A0%81%ED%99%94-3/"><div class="related-posts__item__background" style="background-image:url('/images/logo/MySQL_performance_tuning.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">MySQL 성능최적화 (3)</span></a></div></section></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/2021/09/16/2021-09-16-%EC%A0%9C%ED%92%88-%EA%B0%9C%EB%B0%9C%EC%A0%84%EC%97%90-%EA%B0%80%EC%9E%A5-%EB%A8%BC%EC%A0%80-%EC%83%9D%EA%B0%81%ED%95%B4%EB%B3%B4%EB%A9%B4-%EC%A2%8B%EC%9D%80-%EC%A7%88%EB%AC%B8/">제품 개발전에 가장 먼저 생각해보면 좋은 질문</a></li><li class="recent-posts__item"><a href="/2019/10/24/2019-10-24-elasticsearch-%EC%9D%B4%EC%8A%88-%EB%8C%80%EC%9D%91-1/">elasticsearch 이슈 대응 (1)</a></li><li class="recent-posts__item"><a href="/2019/10/20/2019-10-20-elk-&amp;-kafka-%EA%B8%B0%EB%B0%98%EC%9D%98-%EB%A1%9C%EA%B7%B8-%EC%88%98%EC%A7%91-%EB%B0%8F-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EA%B5%AC%EC%B6%95-(2)/">elk &amp; kafka 기반의 로그 수집 및 모니터링 구축 (2)</a></li><li class="recent-posts__item"><a href="/2019/10/18/2019-10-18-elk-&amp;-kafka-%EA%B8%B0%EB%B0%98%EC%9D%98-%EB%A1%9C%EA%B7%B8-%EC%88%98%EC%A7%91-%EB%B0%8F-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EA%B5%AC%EC%B6%95-(1)/">elk &amp; kafka 기반의 로그 수집 및 모니터링 구축 (1)</a></li><li class="recent-posts__item"><a href="/2018/06/29/2018-06-29-ssh-%EC%82%AC%EC%9A%A9/">ssh 사용</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Archives</h3><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">9월 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">10월 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">6월 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">4월 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">2월 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">1월 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">12월 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">6월 2017</a><span class="archive-list-count">1</span></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/performance/">performance</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/design-pattern/">design-pattern</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/elasticsearch/">elasticsearch</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/elasticsearch/maintenance/">maintenance</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/elasticsearch/monitoring/">monitoring</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/http/RESTful/">RESTful</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/concurrency/">concurrency</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/spring/transaction/">transaction</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ssh/">ssh</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9D%BC%ED%95%98%EB%8A%94%EB%B0%A9%EC%8B%9D/">일하는방식</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9D%BC%ED%95%98%EB%8A%94%EB%B0%A9%EC%8B%9D/%EC%A7%88%EB%AC%B8%ED%95%98%EA%B8%B0/">질문하기</a><span class="category-list-count">1</span></li></ul></li></ul></div></div></div><p class="copyright"><small>© 2022 Lee Hee Chang<br>Powered by <a href="https://hexo.io" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external nofollow noopener noreferrer" target="_blank">HyunSeob</a></small></p></footer><script src="/js/sharer.min.js"></script></body></html>